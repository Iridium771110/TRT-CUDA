

sudo docker commit fe1bd070fa0c ros-noetic-img:cu118

sudo docker run -it --privileged --network=host --gpus all --memory 10000M --name ros-noetic-cu118 -e DISPLAY -e TERM -e QT_X11_NO_MITSHM=1 -v /home/dong/tmp_support:/root/workspace ros-noetic-img:cu118 bash

若出现 runtime 找不到nvidia或者无效
在/etc/docker/daemon.json添加
"runtimes": {
"nvidia": {
"path": "/usr/bin/nvidia-container-runtime",
"runtimeArgs": []
}
}

docker应当考虑将默认存储文件夹挂在大数据盘上
在/etc/docker/daemon.json添加
"data-root": "path"

orin上启动
sudo docker run -it --rm --net=host --runtime nvidia -e DISPLAY=$DISPLAY -v /tmp/.X11-unix/:/tmp/.X11-unix nvcr.io/nvidia/l4t-jetpack:r35.3.1

和宿主机共享网络以后，配置主从机ros-ip的时候直接使用宿主机ip即可
export ROS_MASTER_URI=http://主机ip:11311
export ROS_HOSTNAME=宿主ip

如果本地不存在jetson相关nvidia源，添加jetson相关源
deb https://repo.download.nvidia.com/jetson/common r35.1 main
deb https://repo.download.nvidia.com/jetson/t234 r35.1 main
deb https://repo.download.nvidia.com/jetson/ffmpeg r35.1 main
以后 gpg key 的更新
sudo apt-key adv --fetch-key https://repo.download.nvidia.com/jetson/jetson-ota-public.asc
之后正常 apt update
